"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2178],{586:(t,e,n)=>{n.d(e,{Z:()=>l});var a=n(7757),r=n.n(a);function s(t,e,n,a,r,s,o){try{var c=t[s](o),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(a,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){s(o,a,r,c,i,"next",t)}function i(t){s(o,a,r,c,i,"throw",t)}c(void 0)}))}}function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=n(9669);const l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"next_url",""),i(this,"headersEvs",[])}var e,n,a,s,l;return e=t,n=[{key:"getMessages",value:(l=o(r().mark((function t(e,n){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headersEvs.indexOf(e)<0&&this.headersEvs.push(e),t.next=3,u.get(""==this.next_url?"/api/lead-messages/"+e+"?search="+n:this.next_url+"&search="+n);case 3:return(a=t.sent).data.next_page_url?this.next_url=a.data.next_page_url:this.next_url="",t.abrupt("return",a.data.result);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"resetNextUrl",value:function(){this.next_url=""}},{key:"checkIfNextAvail",value:function(){return""!=this.next_url}},{key:"saveMsg",value:function(t,e){u.post("/api/lead-message-send/"+t,e)}},{key:"unseenMessages",value:(s=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.get("/api/unseen-lead-messages").then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})}],n&&c(e.prototype,n),a&&c(e,a),t}())},2448:(t,e,n)=>{function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>s});var r=n(9669);const s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s;return e=t,n=[{key:"summary",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.get("/api/project/".concat(t,"/task").concat(e)).then((function(t){return t.data.data})).catch((function(t){return t}))}},{key:"tasks",value:function(t){return r.get("/api/tasks"+t).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"update",value:function(t,e,n){return n.append("_method","put"),r.post("/api/project/".concat(t,"/task/").concat(e),n).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"comment",value:function(t,e){return r.post("/api/task/".concat(t,"/comment"),e).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"updateStatus",value:function(t,e,n){return r.post("/api/project/".concat(t,"/").concat(e,"/status/").concat(n)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"usersSummary",value:function(t){return r.get("/api/task/"+t+"/usersSummary").then((function(t){return t.data})).catch((function(t){return t}))}},{key:"timeUpdate",value:function(t){return r.post("/api/task/".concat(t,"/update-time")).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"markCommentsread",value:function(t){return r.post("/api/task/".concat(t,"/mark-comments-read")).then((function(t){return t.data})).catch((function(t){return t}))}}],n&&a(e.prototype,n),s&&a(e,s),t}())},2178:(t,e,n)=>{n.r(e),n.d(e,{default:()=>E});var a=n(7757),r=n.n(a),s=n(8077);const o={data:function(){return{}},mounted:function(){},props:{title:{type:String,default:""},loading:{type:Boolean,default:!0},count:{type:Number,default:0},icon:{type:String,default:""}},computed:{}};var c=n(1900);const i=(0,c.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("v-sheet",{staticClass:"pa-3",attrs:{color:"primary lighten-5"}},[n("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1):n("v-card",{attrs:{elevation:"2",tile:""}},[n("v-card-title",[""!=t.icon?n("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" "+t._s(t.icon)+" ")]):t._e(),t._v("\n      "+t._s(t.title)),n("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n        "+t._s(t.count)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null).exports;var u=n(586);const l={data:function(){return{loading:!0,leads:[]}},mounted:function(){var t=this;u.Z.unseenMessages().then((function(e){t.leads=e,t.loading=!1}))}};const v=(0,c.Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[t.loading?n("v-col",{attrs:{cols:"12"}},[n("v-sheet",{staticClass:"pa-3",attrs:{color:"primary lighten-5"}},[n("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1)],1):n("v-col",{attrs:{cols:"12"}},[n("h3",{staticClass:"text-center"},[t._v("Unseen Messages")]),t._v(" "),[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Email")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Name")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Unseen Message")]),t._v(" "),n("th")])]),t._v(" "),n("tbody",t._l(t.leads,(function(e){return n("tr",{key:e.lead_id},[n("td",[t._v(t._s(e.email))]),t._v(" "),n("td",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),t._v(" "),n("td",[t._v(t._s(e.unseen_count))]),t._v(" "),n("td",[n("v-btn",{staticClass:"white--text",attrs:{link:"",small:"",to:{name:"auth.payment.create",params:{id:e.lead_id}},color:"blue-grey"}},[n("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-account ")]),t._v("\n                          View Summary\n                      ")],1)],1)])})),0)]},proxy:!0}])})]],2)],1)}),[],!1,null,null,null).exports;function d(t,e,n,a,r,s,o){try{var c=t[s](o),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(a,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var s=t.apply(e,n);function o(t){d(s,a,r,o,c,"next",t)}function c(t){d(s,a,r,o,c,"throw",t)}o(void 0)}))}}function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=n(9669);function m(t,e,n,a,r,s,o){try{var c=t[s](o),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(a,r)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var s=t.apply(e,n);function o(t){m(s,a,r,o,c,"next",t)}function c(t){m(s,a,r,o,c,"throw",t)}o(void 0)}))}}var y=new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseuri=e}var e,n,a,s,o;return e=t,n=[{key:"getlist",value:function(t){return h.get("/api/".concat(this.baseuri).concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"create",value:(o=f(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.post("/api/"+this.baseuri,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"delete",value:function(t){t.query;var e=t.id;return h.delete("/api/".concat(this.baseuri,"/").concat(e))}},{key:"get",value:function(t){return h.get("/api/".concat(this.baseuri,"/").concat(t)).then((function(t){return t.data.data}))}},{key:"update",value:(s=f(r().mark((function t(e,n){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,h.post("/api/"+this.baseuri+"/"+n,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})}],n&&p(e.prototype,n),a&&p(e,a),t}())("events");const k={methods:{getEvents:function(t){var e=this;return _(r().mark((function n(){var a,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.start,s=t.end,e.currentSelections.start=a,e.currentSelections.end=s,n.next=5,y.getlist("?start="+a.date+"&end="+s.date).then((function(t){return t.data}));case 5:e.events=n.sent;case 6:case"end":return n.stop()}}),n)})))()},addEvent:function(t){this.form.date=t.date,this.form.event_name="",this.dialog=!0},saveEvent:function(){var t=this;return _(r().mark((function e(){var n,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("title",t.form.event_name),n.append("event_time",t.form.time),n.append("event_date",t.form.date),e.next=6,y.create(n);case 6:if((a=e.sent).status)t.dialog=!1,t.form={event_name:"",time:"",date:""},t.$store.commit("setNotification","Event Added"),t.getEvents(t.currentSelections);else{for(o in s="",a.data)s+=a.data[o]+"</br>";t.$store.commit("setNotification",s)}case 8:case"end":return e.stop()}}),e)})))()}},data:function(){return{type:"Day",types:["Month","Week","Day"],events:[],value:"",form:{date:"",event_name:"",time:""},currentSelections:{start:{},end:{}},dialog:!1}}};const g=(0,c.Z)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-col",{attrs:{cols:"6"}},[n("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},[n("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.prev()}}},[n("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "),n("v-select",{staticClass:"ma-2",attrs:{items:t.types,dense:"",outlined:"","hide-details":"",label:"type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.next()}}},[n("v-icon",[t._v("mdi-chevron-right")])],1)],1),t._v(" "),n("v-sheet",{attrs:{height:"450"}},[n("v-calendar",{ref:"calendar",attrs:{type:t.type.toLowerCase(),events:t.events,"event-overlap-threshold":30,color:"primary"},on:{change:t.getEvents,"click:date":t.addEvent,"click:day":t.addEvent,"click:time":t.addEvent,"click:interval":t.addEvent},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[t._v("Reminder/Event for "),n("b",[t._v(t._s(t.form.date))])])]),t._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Event Name",hint:"You can Write the Future calls or about reminders you have here.","persistent-hint":"",required:""},model:{value:t.form.event_name,callback:function(e){t.$set(t.form,"event_name",e)},expression:"form.event_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-row",{attrs:{justify:"space-around",align:"center"}},[n("v-time-picker",{attrs:{scrollable:"","ampm-in-title":"",format:"ampm"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1)],1)],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveEvent}},[t._v("\n            Save\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;var x=n(2448);function b(t,e,n,a,r,s,o){try{var c=t[s](o),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(a,r)}const w={components:{adminbar:s.Z,taskWidget:i,unseenMessages:v,calendar:g},data:function(){return{tasks:[{title:"Today Tasks",loading:!0,count:0,type:"today",icon:"mdi-calendar-today"},{title:"Overdue Tasks",loading:!0,count:0,type:"overdue",icon:"mdi-calendar-alert"},{title:"Upcomming Tasks",loading:!0,count:0,type:"upcomming",icon:"mdi-calendar-refresh"},{title:"All Tasks",loading:!0,count:0,type:"all",icon:"mdi-calendar"}]}},mounted:function(){var t,e=this;return(t=r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(8!=e.user.role_id&&7!=e.user.role_id&&4!=e.user.role_id&&5!=e.user.role_id){t.next=10;break}n=0;case 2:if(!(n<e.tasks.length)){t.next=10;break}return t.next=5,x.Z.tasks("?perpage=0&getCount=true&type="+e.tasks[n].type);case 5:e.tasks[n].count=t.sent,e.tasks[n].loading=!1;case 7:n++,t.next=2;break;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var s=t.apply(e,n);function o(t){b(s,a,r,o,c,"next",t)}function c(t){b(s,a,r,o,c,"throw",t)}o(void 0)}))})()},computed:{user:function(){return this.$store.getters.loggedInUser}}};var C=(0,c.Z)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[8==t.user.role_id||7==t.user.role_id||4==t.user.role_id||5==t.user.role_id?n("v-col",{attrs:{cols:"12"}},[n("v-row",t._l(t.tasks,(function(t,e){return n("v-col",{key:e,attrs:{cols:"3"}},[n("taskWidget",{attrs:{icon:t.icon,count:t.count,loading:t.loading,title:t.title}})],1)})),1)],1):t._e(),t._v(" "),2==t.user.role_id||4==t.user.role_id||5==t.user.role_id?n("v-col",{attrs:{cols:"12"}},[n("unseenMessages",{attrs:{user:t.user}})],1):t._e(),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-divider")],1),t._v(" "),n("calendar")],1)}),[],!1,null,null,null);const E=C.exports}}]);