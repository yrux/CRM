"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8066],{3567:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)}))}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=r(9669);const u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,s,u;return e=t,r=[{key:"getlist",value:function(t){return c.get("/api/brief-form".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"create",value:(u=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/brief-form",e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"delete",value:function(t){t.query;var e=t.id;return c.delete("/api/brief-form/".concat(e))}},{key:"get",value:function(t){return c.get("/api/brief-form/".concat(t)).then((function(t){return t.data.data}))}},{key:"update",value:(s=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,c.post("/api/brief-form/"+r,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})}],r&&i(e.prototype,r),n&&i(e,n),t}())},9519:(t,e,r)=>{r.d(e,{Z:()=>c});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=r(9669);const c=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,c,u;return e=t,r=[{key:"create",value:(c=a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.post("/api/file",e).then((function(t){return{status:1,data:t.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})),u=function(){var t=this,e=arguments;return new Promise((function(r,n){var a=c.apply(t,e);function o(t){s(a,r,n,o,i,"next",t)}function i(t){s(a,r,n,o,i,"throw",t)}o(void 0)}))},function(t){return u.apply(this,arguments)})}],r&&o(e.prototype,r),n&&o(e,n),t}())},9556:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)}))}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=r(9669);const u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,s,u,l,d,v,f;return e=t,r=[{key:"getlist",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.get("/api/leads".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"delete",value:function(t){t.query;var e=t.id;return c.delete("/api/leads/".concat(e))}},{key:"create",value:(f=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads",e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},{key:"get",value:(v=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get("/api/leads/".concat(e));case 2:return r=t.sent,t.abrupt("return",r.data.data);case 4:case"end":return t.stop()}}),t)}))),function(t){return v.apply(this,arguments)})},{key:"update",value:(d=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,c.post("/api/leads/"+r,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return d.apply(this,arguments)})},{key:"updateStatus",value:(l=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads/"+e+"/"+r).then((function(t){return{status:1}})).catch((function(t){return{status:0}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"assignUser",value:(u=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads/"+e+"/user/"+r).then((function(t){return{status:1}})).catch((function(t){return{status:0}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return u.apply(this,arguments)})},{key:"createCustomer",value:(s=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads-create-user/"+e).then((function(t){return t.data})).catch((function(t){return{status:0}}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})}],r&&i(e.prototype,r),n&&i(e,n),t}())},5333:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)}))}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=r(9669);const u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,s,u,l,d,v;return e=t,r=[{key:"getlist",value:function(t,e){return c.get("/api/leads/".concat(t,"/payments").concat(e)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"delete",value:function(t){var e=t.lead,r=t.id;return c.delete("/api/leads/".concat(e,"/payments/").concat(r))}},{key:"create",value:(v=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads/".concat(e,"/payments"),r).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return v.apply(this,arguments)})},{key:"get",value:(d=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get("/api/leads/".concat(e,"/payments/").concat(r));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return d.apply(this,arguments)})},{key:"update",value:(l=o(a().mark((function t(e,r,n){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,c.post("/api/leads/".concat(n,"/payments/").concat(r),e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)}))),function(t,e,r){return l.apply(this,arguments)})},{key:"checkEmail",value:(u=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/payments/"+e,r).then((function(t){return{status:1,data:t.data}})).catch((function(t){return{status:0,data:t.response.message}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return u.apply(this,arguments)})},{key:"getBrand",value:(s=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/payments-getbrand/"+e).then((function(t){return t.data}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})}],r&&i(e.prototype,r),n&&i(e,n),t}())},8941:(t,e,r)=>{r.d(e,{Z:()=>c});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=r(9669);const c=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,c,u;return e=t,r=[{key:"getlist",value:function(t){return i.get("/api/project".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"validateTask",value:function(t){return i.post("/api/task-validate",t).then((function(t){return{status:1,data:"validated"}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"createTask",value:function(t,e){return i.post("/api/project/"+t+"/task",e).then((function(t){return{status:1,data:t.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"create",value:function(t){return i.post("/api/project",t).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"update",value:(c=a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,i.post("/api/project/"+r,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})),u=function(){var t=this,e=arguments;return new Promise((function(r,n){var a=c.apply(t,e);function o(t){s(a,r,n,o,i,"next",t)}function i(t){s(a,r,n,o,i,"throw",t)}o(void 0)}))},function(t,e){return u.apply(this,arguments)})},{key:"get",value:function(t){return i.get("/api/project/".concat(t)).then((function(t){return t.data.data})).catch((function(t){return t}))}}],r&&o(e.prototype,r),n&&o(e,n),t}())},5961:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(7757),a=r.n(n);function s(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)}))}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=r(9669);const u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,s,u;return e=t,r=[{key:"getlist",value:function(t){return c.get("/api/user-briefs".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"create",value:(u=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/user-briefs",e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"delete",value:function(t){t.query;var e=t.id;return c.delete("/api/user-briefs/".concat(e))}},{key:"get",value:function(t){return c.get("/api/user-briefs/".concat(t)).then((function(t){return t.data.data}))}},{key:"update",value:(s=o(a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.append("_method","put"),t.next=3,c.post("/api/user-briefs/"+r,e).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})}],r&&i(e.prototype,r),n&&i(e,n),t}())},7550:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(3645),a=r.n(n)()((function(t){return t[1]}));a.push([t.id,'.message_area_editor[data-v-7110d13a]{border:1px solid #0000001f;width:100%}.message_area_editor[data-v-7110d13a]:empty:before{color:#000;content:"Type Message Here";width:100%}',""]);const s=a},8066:(t,e,r)=>{r.r(e),r.d(e,{default:()=>S});var n=r(7757),a=r.n(n),s=r(9556);function o(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=r(9669);const u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,s,u;return e=t,r=[{key:"getlist",value:function(t,e){return c.get("/api/leads/".concat(t,"/notes").concat(e)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"create",value:(s=a().mark((function t(e,r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.post("/api/leads/".concat(e,"/notes"),r).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})),u=function(){var t=this,e=arguments;return new Promise((function(r,n){var a=s.apply(t,e);function i(t){o(a,r,n,i,c,"next",t)}function c(t){o(a,r,n,i,c,"throw",t)}i(void 0)}))},function(t,e){return u.apply(this,arguments)})}],r&&i(e.prototype,r),n&&i(e,n),t}());var l=r(8941),d=r(5333),v=r(3567),f=r(5961);const p={props:{status:String,text:String},data:function(){return{}},computed:{}};var m=r(1900);const _=(0,m.Z)(p,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-chip",{attrs:{label:"","text-color":"white",color:t.status}},[t._v(t._s(t.text))])}),[],!1,null,null,null).exports;var h=r(9519);function y(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(t){y(s,n,a,o,i,"next",t)}function i(t){y(s,n,a,o,i,"throw",t)}o(void 0)}))}}const w={props:{table:{type:String,default:""},inputName:{type:String,default:"message"}},data:function(){return{allowMessages:!0,currentfiles:[]}},methods:{pasteInMessage:function(t){var e=this;return b(a().mark((function r(){var n,s,o,i,c,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.allowMessages=!1,!((n=t.clipboardData.files).length>0)){r.next=19;break}s=0;case 4:if(!(o=n[s])){r.next=19;break}return r.next=7,e.readFile(o);case 7:return(i=new FormData).append("ref_id",0),i.append("table_name",e.table),i.append("type","2"),i.append("attachements[0]",o),r.next=14,h.Z.create(i);case 14:(c=r.sent).status&&e.currentfiles.push(c.data[0]);case 16:s++,r.next=4;break;case 19:return(u=t.clipboardData.getData("text/plain"))&&document.execCommand("insertHTML",!0,u),e.allowMessages=!0,t.preventDefault(),r.abrupt("return",!1);case 24:case"end":return r.stop()}}),r)})))()},readFile:function(t){return b(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n)},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))()},disableDrop:function(t){return t.preventDefault(),!1},typingMessage:function(t){if(13==t.keyCode&&1==t.shiftKey);else if(13==t.keyCode){if(this.allowMessages&&this.$refs.message_area_editor.innerText){var e=new FormData;e.append(this.inputName,this.$refs.message_area_editor.innerHTML);for(var r=0;r<this.currentfiles.length;r++)e.append("attachements["+r+"]",this.currentfiles[r].id);this.currentfiles=[],this.$refs.message_area_editor.innerHTML="",this.$emit("sendingData",e)}return t.preventDefault(),!1}}}};var k=r(3379),x=r.n(k),g=r(7550),C={insert:"head",singleton:!1};x()(g.Z,C);g.Z.locals;function P(t,e,r,n,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(t){P(s,n,a,o,i,"next",t)}function i(t){P(s,n,a,o,i,"throw",t)}o(void 0)}))}}const T={components:{StatusChip:_,InlineEditor:(0,m.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{"no-gutters":""}},[t._l(t.currentfiles,(function(e,n){return r("v-chip",{key:e.id,attrs:{close:"",color:"green",outlined:""},on:{"click:close":function(e){return t.currentfiles.splice(n,1)}}},[t._v("\n    "+t._s(e.url.split("/")[e.url.split("/").length-1])+"\n  ")])})),t._v(" "),r("div",{ref:"message_area_editor",staticClass:"message_area_editor mt-7 pa-1",attrs:{contentEditable:"true"},on:{drop:t.disableDrop,paste:t.pasteInMessage,keydown:t.typingMessage}})],2)}),[],!1,null,"7110d13a",null).exports},data:function(){return{createPaymentTgl:!1,createBriefTgl:!1,lead:{},payments:[],briefs:[],lead_notes:[],form:{amount:0,status:0,merchant:"stripe",description:"",payment_type:"sell",project_id:0,currency:"USD"},briefform:{name:"",form_id:0},briefforms:[],formerrors:{amount:[],status:[],merchant:[],description:[],payment_type:[],project_id:[],currency:[]},merchants:[{key:"stripe",value:"Stripe"},{key:"other",value:"Other"}],statuses:[{key:0,value:"Pending/Waiting"},{key:1,value:"Paid"}],payment_types:[{key:"sell",value:"Sell"},{key:"upsell",value:"UpSell"},{key:"bonus",value:"Bonus"}],lead_projects:[],valid:!1,loaders:[0]}},mounted:function(){var t=this;return j(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.startupreqs();case 1:case"end":return e.stop()}}),e)})))()},methods:{sendLeadNotes:function(t){var e=this;return j(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.create(e.$route.params.id,t).then(function(){var t=j(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getlist(e.$route.params.id,"").then((function(t){return t.data}));case 2:e.lead_notes=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},openFile:function(t){window.open(t,"_blank").focus()},sendForm:function(){var t=this;return j(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.briefform.form_id>0&&""!=t.briefform.name)){e.next=19;break}return(r=new FormData).append("form_name",t.briefform.name),r.append("form_id",t.briefform.form_id),r.append("user_id",t.lead.user_id),r.append("brand_id",t.lead.brand_id),e.next=8,f.Z.create(r);case 8:if(!e.sent.status){e.next=17;break}return t.$store.commit("setNotification","Brief Sent to Customer"),e.next=13,f.Z.get("?user_id="+t.lead.user_id);case 13:t.briefs=e.sent,t.briefform.form_id=0,t.briefform.name="",t.createBriefTgl=!1;case 17:e.next=20;break;case 19:t.$store.commit("setNotification","Please Select Form and Type name to sent brief to user");case 20:case"end":return e.stop()}}),e)})))()},getLead:function(t){var e=this;return j(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.get(t);case 2:if(e.lead=r.sent,!e.lead){r.next=11;break}return r.next=6,d.Z.get(e.lead.id,"");case 6:if(e.payments=r.sent,!(e.lead.user_id>0)){r.next=11;break}return r.next=10,f.Z.get("?user_id="+e.lead.user_id);case 10:e.briefs=r.sent;case 11:case"end":return r.stop()}}),r)})))()},CopyLinkToClipBoard:function(t){var e=this;return j(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:navigator.clipboard.writeText(t),e.$store.commit("setNotification","Payment Link Copied to Clip Board");case 2:case"end":return r.stop()}}),r)})))()},createPayment:function(){var t=this;return j(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formerrors={amount:[],status:[],merchant:[],description:[],project_id:[],payment_type:[],currency:[]},(r=new FormData).append("amount",t.form.amount),r.append("status",t.form.status),r.append("merchant",t.form.merchant),r.append("description",t.form.description),r.append("payment_type",t.form.payment_type),r.append("project_id",t.form.project_id),r.append("currency",t.form.currency),e.next=11,d.Z.create(t.lead.id,r);case 11:if(!(n=e.sent).status){e.next=22;break}if(t.$store.commit("setNotification","Payment Created"),t.form={amount:0,status:0,merchant:"stripe",description:"",currency:"USD"},t.createPaymentTgl=!1,!t.lead){e.next=20;break}return e.next=19,d.Z.get(t.lead.id,"");case 19:t.payments=e.sent;case 20:e.next=29;break;case 22:n.data.amount&&(t.formerrors.amount=n.data.amount),n.data.status&&(t.formerrors.status=n.data.status),n.data.merchant&&(t.formerrors.merchant=n.data.merchant),n.data.description&&(t.formerrors.description=n.data.description),n.data.payment_type&&(t.formerrors.payment_type=n.data.payment_type),n.data.project_id&&(t.formerrors.project_id=n.data.project_id),n.data.currency&&(t.formerrors.currency=n.data.currency);case 29:case"end":return e.stop()}}),e)})))()},signupUserManually:function(){var t=this;return j(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaders[0]=1,e.next=3,s.Z.createCustomer(t.lead.id).then((function(e){t.lead=e}));case 3:t.loaders[0]=0,t.startupreqs();case 5:case"end":return e.stop()}}),e)})))()},startupreqs:function(){var t=this;return j(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getLead(t.$route.params.id),e.next=3,u.getlist(t.$route.params.id,"").then((function(t){return t.data}));case 3:return t.lead_notes=e.sent,e.next=6,v.Z.get("?all=true");case 6:if(t.briefforms=e.sent,!(parseInt(t.lead.user_id)>0)){e.next=12;break}return e.next=10,l.Z.getlist("?perpage=0&customer_id="+t.lead.user_id).then((function(t){return t.data}));case 10:t.lead_projects=e.sent,t.lead_projects.length>0&&(t.form.project_id=t.lead_projects[0].project_id_int);case 12:case"end":return e.stop()}}),e)})))()}},watch:{},computed:{}};const S=(0,m.Z)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",[t._l(5,(function(e){return r("v-col",{directives:[{name:"show",rawName:"v-show",value:!t.lead.id,expression:"!lead.id"}],key:e},[r("v-sheet",{staticClass:"pa-3"},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"max-width":"300",type:"card"}})],1)],1)})),t._v(" "),t.lead.id>0?r("v-col",[r("v-card",{attrs:{elevation:"2",tile:""}},[r("v-card-title",[r("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" mdi-projector-screen ")]),t._v("\n        Total Projects"),r("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n          "+t._s(t.lead_projects.length)+"\n        ")])],1)],1)],1):t._e(),t._v(" "),t.lead.id>0?r("v-col",[r("v-card",{attrs:{elevation:"2",tile:""}},[r("v-card-title",[r("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" mdi-currency-usd ")]),t._v("\n        Total Paid"),r("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n          "+t._s(t.lead.totalPaid)+"\n        ")])],1)],1)],1):t._e(),t._v(" "),t.lead.id>0?r("v-col",[r("v-card",{attrs:{elevation:"2",tile:""}},[r("v-card-title",[r("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" mdi-calendar-today ")]),t._v("\n        Created@\n        "),r("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n          "+t._s(t.lead.created_at_formatted)+"\n        ")])],1)],1)],1):t._e(),t._v(" "),t.lead.id>0?r("v-col",[r("v-card",{attrs:{elevation:"2",tile:""}},[r("v-card-title",[r("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" mdi-calendar-alert ")]),t._v("\n        Total Running Tasks"),r("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n          Tags\n        ")])],1)],1)],1):t._e(),t._v(" "),t.lead.id>0?r("v-col",[r("v-card",{attrs:{elevation:"2",tile:""}},[r("v-card-title",[r("v-icon",{attrs:{color:"indigo",size:"55"}},[t._v(" mdi-watermark ")]),t._v("\n        Brand"),r("v-chip",{staticClass:"ma-2",attrs:{color:"pink",label:"","text-color":"white"}},[t._v("\n          "+t._s(t.lead.brand_code)+"\n        ")])],1)],1)],1):t._e(),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-divider")],1),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-list",{attrs:{"two-line":""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-account ")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.lead.first_name)+" "+t._s(t.lead.last_name))]),t._v(" "),r("v-list-item-subtitle",[t._v("Full Name")])],1)],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-list",{attrs:{"two-line":""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-at ")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.lead.email))]),t._v(" "),r("v-list-item-subtitle",[t._v("Email")])],1)],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-list",{attrs:{"two-line":""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-phone ")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.lead.phone))]),t._v(" "),r("v-list-item-subtitle",[t._v("Phone")])],1)],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-list",{attrs:{"two-line":""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-domain ")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.lead.company))]),t._v(" "),r("v-list-item-subtitle",[t._v("Company")])],1)],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-divider")],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-btn",{on:{click:function(e){t.createPaymentTgl=!t.createPaymentTgl}}},[t._v("\n              Generate Payment Link\n              "),r("v-icon",[t._v(t._s(t.createPaymentTgl?"mdi-chevron-up":"mdi-chevron-down"))])],1),t._v(" "),t.lead.user_id>0?r("v-btn",{attrs:{color:"success"}},[t._v("User Signedup")]):r("v-btn",{attrs:{color:"success",loading:1==t.loaders[0],disabled:1==t.loaders[0]},on:{click:t.signupUserManually}},[t._v("Create User")]),t._v(" "),t.lead.user_id>0?r("v-btn",{on:{click:function(e){t.createBriefTgl=!t.createBriefTgl}}},[t._v("\n              Send Brief Form\n              "),r("v-icon",[t._v(t._s(t.createBriefTgl?"mdi-chevron-up":"mdi-chevron-down"))])],1):t._e(),t._v(" "),t.lead.user_id>0?r("v-badge",{attrs:{bordered:"",color:"info",content:0==t.lead.unseen_messages?"0":t.lead.unseen_messages,overlap:""}},[r("v-btn",{attrs:{link:"",to:{name:"auth.leads.messages",params:{id:t.lead.id}}}},[t._v("\n                Messages\n                "),r("v-icon",[t._v("mdi-message-processing-outline")])],1)],1):t._e()],1),t._v(" "),r("v-expand-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:t.createPaymentTgl,expression:"createPaymentTgl"}],staticClass:"col-md-12"},[r("v-divider"),t._v(" "),r("v-row",{staticClass:"pa-4"},[r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Amount$",required:"","error-messages":t.formerrors.amount},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-select",{attrs:{items:t.merchants,label:"Merchant","item-text":"value","item-value":"key",required:"","error-messages":t.formerrors.merchant},model:{value:t.form.merchant,callback:function(e){t.$set(t.form,"merchant",e)},expression:"form.merchant"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Description","error-messages":t.formerrors.description},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-select",{attrs:{items:t.statuses,label:"Payment Status","item-text":"value","item-value":"key",required:"","error-messages":t.formerrors.status},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),r("v-col",{attrs:{cols:"3",md:"3"}},[r("v-select",{attrs:{items:t.payment_types,label:"Type","item-text":"value","item-value":"key",required:"","error-messages":t.formerrors.status},model:{value:t.form.payment_type,callback:function(e){t.$set(t.form,"payment_type",e)},expression:"form.payment_type"}})],1),t._v(" "),r("v-col",{attrs:{cols:"3",md:"3"}},[r("v-select",{attrs:{items:[{key:"USD",value:"USD"},{key:"GBP",value:"GBP"}],label:"Currency","item-text":"key","item-value":"value",required:"","error-messages":t.formerrors.currency},model:{value:t.form.currency,callback:function(e){t.$set(t.form,"currency",e)},expression:"form.currency"}})],1),t._v(" "),t.lead.user_id>0?r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-select",{attrs:{items:t.lead_projects,label:"Projects","item-text":"project_id","item-value":"project_id_int",required:"","error-messages":t.formerrors.project_id},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}})],1):t._e(),t._v(" "),r("v-col",{attrs:{cols:"6",md:"12"}},[r("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey float-left"},on:{click:t.createPayment}},[r("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-currency-usd ")]),t._v("\n                    Generate\n                  ")],1)],1)],1)],1)]),t._v(" "),r("v-expand-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:t.createBriefTgl,expression:"createBriefTgl"}],staticClass:"col-md-12"},[r("v-divider"),t._v(" "),r("v-row",{staticClass:"pa-4"},[r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-select",{attrs:{items:t.briefforms,label:"Brief Forms","item-text":"form_name","item-value":"id",required:""},model:{value:t.briefform.form_id,callback:function(e){t.$set(t.briefform,"form_id",e)},expression:"briefform.form_id"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.briefform.name,callback:function(e){t.$set(t.briefform,"name",e)},expression:"briefform.name"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"12"}},[r("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey float-right"},on:{click:t.sendForm}},[r("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-database-eye-outline ")]),t._v("\n                    Send\n                  ")],1)],1)],1)],1)])],1)],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-divider")],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("h2",[t._v("Past Payment Links")])]),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v("Amount")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Description")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Merchant")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Type")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Currency")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Project")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Status")]),t._v(" "),r("th",{staticClass:"text-left"})])]),t._v(" "),r("tbody",t._l(t.payments,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.amount))]),t._v(" "),r("td",[t._v(t._s(e.description))]),t._v(" "),r("td",[t._v(t._s(e.merchant))]),t._v(" "),r("td",[t._v(t._s(e.payment_type_text))]),t._v(" "),r("td",[t._v(t._s(e.currency))]),t._v(" "),r("td",[t._v(t._s(e.project_id>0?e.project.project_id:"N/A"))]),t._v(" "),r("td",[0==e.status?r("StatusChip",{attrs:{status:"orange",text:e.payment_status_text}}):t._e(),t._v(" "),1==e.status?r("StatusChip",{attrs:{status:"green",text:e.payment_status_text}}):t._e(),t._v(" "),2==e.status?r("StatusChip",{attrs:{status:"red",text:e.payment_status_text}}):t._e()],1),t._v(" "),r("td",[1!=e.status&&"other"!=e.merchant?r("v-btn",{staticClass:"white--text",attrs:{small:"",color:"blue float-right"},on:{click:function(r){return t.CopyLinkToClipBoard(e.payment_link)}}},[r("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-anchor ")]),t._v("\n                      Copy Link\n                    ")],1):t._e()],1)])})),0)]},proxy:!0}])})],1)],1)],1)],1),t._v(" "),t.lead.user_id>0?r("v-col",{attrs:{cols:"12"}},[r("v-divider")],1):t._e(),t._v(" "),t.lead.user_id>0?r("v-col",{attrs:{cols:"12"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("h2",[t._v("Briefs Sent to Client")])]),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v("Form")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Status")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Sent@")]),t._v(" "),r("th",{staticClass:"text-left"},[t._v("Filled@")]),t._v(" "),r("th",{staticClass:"text-left"})])]),t._v(" "),r("tbody",t._l(t.briefs,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.form_name))]),t._v(" "),r("td",[t._v(t._s(e.status_text))]),t._v(" "),r("td",[t._v(t._s(e.created_at_formatted))]),t._v(" "),r("td",[t._v("\n                    "+t._s(0!=e.status?e.updated_at_formatted:"N/A")+"\n                  ")]),t._v(" "),r("td",[0!=e.status?r("v-btn",{staticClass:"white--text",attrs:{link:"",to:{name:"guest.brief.detail",params:{id:e.id}},small:"",color:"blue float-right"}},[r("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-database-eye-outline ")]),t._v("\n                      See Details\n                    ")],1):t._e()],1)])})),0)]},proxy:!0}],null,!1,3443444841)})],1)],1)],1)],1):t._e(),t._v(" "),r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("h2",[t._v("Lead Notes")])]),t._v(" "),t.lead_notes.length>0?r("v-col",{attrs:{cols:"12"}},[r("v-timeline",{attrs:{dense:""}},[r("v-slide-x-reverse-transition",{attrs:{group:"","hide-on-leave":""}},t._l(t.lead_notes,(function(e){return r("v-timeline-item",{key:e.id,attrs:{color:"info",small:""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("v-avatar",[r("img",{attrs:{src:e.user.image_url}})])]},proxy:!0}],null,!0)},[t._v("\n              "+t._s(e.created_at_formatted)+"\n              "),t._v(" "),r("v-row",{staticClass:"pt-4"},[r("v-col",{attrs:{cols:"1"}},[r("strong",[t._v(t._s(e.user.name))])]),t._v(" "),r("v-col",{staticClass:"black white--text",domProps:{innerHTML:t._s(e.note)}}),t._v(" "),r("v-col",{attrs:{cols:"12"}},[e.files.length>0?r("div",{staticClass:"chat_attachements mt-2"},t._l(e.files,(function(e,n){return r("v-chip",{key:e.id,attrs:{color:"green d-inline-block",outlined:""},on:{click:function(r){return t.openFile(e.full_url)}}},[t._v("\n                      "+t._s(e.url.split("/")[e.url.split("/").length-1])+"\n                      ")])})),1):t._e()])],1)],1)})),1)],1)],1):t._e(),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("InlineEditor",{attrs:{table:"lead_notes",inputName:"note"},on:{sendingData:t.sendLeadNotes}})],1)],1)],1)],2)}),[],!1,null,null,null).exports}}]);