"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[504],{8941:(t,e,n)=>{function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>o});var r=n(9669);const o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"getlist",value:function(t){return r.get("/api/project".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"validateTask",value:function(t){return r.post("/api/task-validate",t).then((function(t){return{status:1,data:"validated"}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"createTask",value:function(t,e){return r.post("/api/project/"+t+"/task",e).then((function(t){return{status:1,data:t.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"create",value:function(t){return r.post("/api/project",t).then((function(t){return{status:1,data:t.data.data}})).catch((function(t){return{status:0,data:t.response.data.errors}}))}},{key:"get",value:function(t){return r.get("/api/project/".concat(t)).then((function(t){return t.data.data})).catch((function(t){return t}))}}])&&a(e.prototype,n),o&&a(e,o),t}())},2448:(t,e,n)=>{function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>o});var r=n(9669);const o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,n=[{key:"summary",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.get("/api/project/".concat(t,"/task").concat(e)).then((function(t){return t.data.data})).catch((function(t){return t}))}},{key:"tasks",value:function(t){return r.get("/api/tasks"+t).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"update",value:function(t,e,n){return n.append("_method","put"),r.post("/api/project/".concat(t,"/task/").concat(e),n).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"comment",value:function(t,e){return r.post("/api/task/".concat(t,"/comment"),e).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"updateStatus",value:function(t,e,n){return r.post("/api/project/".concat(t,"/").concat(e,"/status/").concat(n)).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"usersSummary",value:function(t){return r.get("/api/task/"+t+"/usersSummary").then((function(t){return t.data})).catch((function(t){return t}))}},{key:"timeUpdate",value:function(t){return r.post("/api/task/".concat(t,"/update-time")).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"markCommentsread",value:function(t){return r.post("/api/task/".concat(t,"/mark-comments-read")).then((function(t){return t.data})).catch((function(t){return t}))}}],n&&a(e.prototype,n),o&&a(e,o),t}())},4504:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var a=n(7757),r=n.n(a),o=n(8941),i=n(2448);function s(t,e,n,a,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,r)}const c={props:["projectid"],mounted:function(){this.getSummary()},methods:{getSummary:function(){var t,e=this;return(t=r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.summary(e.projectid);case 2:e.tasks=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){s(o,a,r,i,c,"next",t)}function c(t){s(o,a,r,i,c,"throw",t)}i(void 0)}))})()}},data:function(){return{tasks:[],calendarColor:{Today:"green",Overdue:"red",Upcomming:"blue"}}},watch:{projectid:function(){this.getSummary()}},computed:{tasks_grouped:function(){for(var t={},e=0;e<this.tasks.length;e++)t[this.tasks[e].due_type]||(t[this.tasks[e].due_type]=[]),t[this.tasks[e].due_type].push(this.tasks[e]);return t}}};var u=n(1900),l=(0,u.Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.tasks_grouped,(function(e,a){return n("v-timeline",{key:a,staticStyle:{"max-width":"600px"},attrs:{dense:"",clipped:""}},[n("v-timeline-item",{staticClass:"white--text mb-12",attrs:{"fill-dot":"",color:t.calendarColor[a],large:""},scopedSlots:t._u([{key:"icon",fn:function(){return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return["Today"==a?n("v-icon",t._g(t._b({attrs:{color:"white"}},"v-icon",o,!1),r),[t._v("mdi-calendar-today")]):t._e(),t._v(" "),"Overdue"==a?n("v-icon",t._g(t._b({attrs:{color:"white"}},"v-icon",o,!1),r),[t._v("mdi-calendar-alert")]):t._e(),t._v(" "),"Upcomming"==a?n("v-icon",t._g(t._b({attrs:{color:"white"}},"v-icon",o,!1),r),[t._v("mdi-calendar-refresh")]):t._e()]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(a))])])]},proxy:!0}],null,!0)}),t._v(" "),t._l(e,(function(e,a){return n("v-timeline-item",{key:a,staticClass:"mb-4",attrs:{color:"grey","icon-color":"grey lighten-2",small:""}},[n("v-row",{attrs:{justify:"space-between"}},[n("v-col",{attrs:{cols:"7"}},[t._v(" "+t._s(e.title)+" ")]),t._v(" "),n("v-col",{staticClass:"text-right",attrs:{cols:"5"}},[t._v(" "+t._s(e.due_date)+" ")])],1)],1)})),t._v(" "),n("v-divider")],2)})),1)}),[],!1,null,null,null);function d(t,e,n,a,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,r)}const p={components:{"task-timeline":l.exports},data:function(){return{expanded:[],bread:[{text:"Dashboard",to:{name:"auth.dashboard"},disabled:!1,exact:!0},{text:"Project",to:{name:"auth.projects.listing"},disabled:!1,exact:!0}],selectedProject:[],search:"",items:[],loading:!0,totalRecords:0,options:{},headers:[{text:"Title",align:"start",sortable:!0,value:"title"},{text:"Project ID",align:"start",sortable:!0,value:"project_id"},{text:"Customer",align:"start",sortable:!0,value:"customer_email"},{text:"Created@",align:"start",sortable:!1,value:"created_at_formatted"},{text:"Actions",value:"actions",sortable:!1}]}},watch:{$route:function(){this.getDataFromApi()},perpage:function(){this.getDataFromApi()},options:{handler:function(){this.getDataFromApi()},deep:!0},search:function(){this.getDataFromApi()},expanded:function(){this.expanded.length}},mounted:function(){this.getDataFromApi()},methods:{getDataFromApi:function(){var t,e=this;return(t=r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fakeApiCall();case 2:n=t.sent,e.items=n.data;try{e.totalRecords=n.meta.total}catch(t){}e.loading=!1;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){d(o,a,r,i,s,"next",t)}function s(t){d(o,a,r,i,s,"throw",t)}i(void 0)}))})()},fakeApiCall:function(){this.loading=!0;var t="";return t+="?page="+this.options.page,this.options.sortBy.length>0&&(t+="&sortCol="+this.options.sortBy[0]),this.options.sortDesc.length>0&&(t+="&sortByDesc="+(1==this.options.sortDesc[0]?1:0)),t+="&perpage="+this.options.itemsPerPage,""!=this.search&&(t+="&search="+this.search),o.Z.getlist(t)}}};const f=(0,u.Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{attrs:{"no-gutters":""}},[n("v-breadcrumbs",{attrs:{items:t.bread},scopedSlots:t._u([{key:"divider",fn:function(){return[n("v-icon",[t._v("mdi-forward")])]},proxy:!0}])})],1),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,options:t.options,"server-items-length":t.totalRecords,loading:t.loading,"item-key":"project_id","show-expand":"",expanded:t.expanded,"single-expand":!0},on:{"update:options":function(e){t.options=e},"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.email",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(n.name)+" | "+t._s(n.email)+"\n      ")]}},{key:"item.actions",fn:function(e){var a=e.item;return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"info",fab:"","x-small":"",dark:"",to:{name:"auth.task.open",query:{project:a.project_id_int}}}},"v-btn",o,!1),r),[n("v-icon",[t._v("mdi-file-tree")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("Create/Assign Task")])])]}},{key:"expanded-item",fn:function(t){var e=t.headers,a=t.item;return[n("td",{attrs:{colspan:e.length}},[n("task-timeline",{attrs:{projectid:a.project_id_int}})],1)]}}])})],1)}),[],!1,null,null,null).exports}}]);